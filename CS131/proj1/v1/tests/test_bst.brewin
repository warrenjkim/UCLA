(class main
  (field tree null)
  (method main ()
    (begin
      (set tree (new bst))
      (call tree init 7)
      (call tree insert 2)
      (call tree insert 18)
      (call tree insert 1)
      (call tree insert 4)
      (call tree insert 3)
      (call tree insert 9)
      (call tree insert 20)
      (call tree insert 21)
      (call tree inorder)           # print sorted order
      (print (call tree search 3))  # true
      (print (call tree search 12)) # false
    )
  )
)

(class bst
  (field value -1)
  (field left null)
  (field right null)
  (field temp null)
  (method init (v)
    (set value v)
  )
  (method search (v)
    (begin
      (if (& (< v value) (!= left null))
        (return (call left search v))
      )
      (if (& (> v value) (!= right null))
        (return (call right search v))
      )
      (return (== v value))
    )
  )
  (method insert (v)
    (begin
      (set temp (new bst))
      (call temp init v)
      (if (< v value)
        (if (== left null)
          (begin
            (set left temp)
            (return)
          )
          (call left insert v)
        )
      )
      (if (> v value)
        (if (== right null)
          (begin
            (set right temp)
            (return)
          )
          (call right insert v)
      )
      )
    )
  )
  (method inorder ()
    (begin
      (if (!= left null)
        (call left inorder)
      )
      (print value)
      (if (!= right null)
        (call right inorder)
      )
    )
  )
)